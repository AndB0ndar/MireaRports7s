\ProvidesPackage{style}

\usepackage{cmap} % for pdfLaTeX
\usepackage[T1,T2A]{fontenc} % correct encoding for pdfLaTeX
\usepackage[utf8]{inputenc} % correct encoding source file
\usepackage[english,russian]{babel} % correct language

% ----------------------------------------------------------------------------
% TEXT SETTINGS
% ----------------------------------------------------------------------------

\usepackage{fontspec} % use standart fonts (only for xelatex!!!)
\setmainfont{Times New Roman}
\setsansfont{Arial}
\setmonofont[Scale=0.9]{Courier New}

\usepackage[none]{hyphenat} % no word breaks

\usepackage{setspace}
%\singlespacing % 1.0
\onehalfspacing % 1.5

% ----------------------------------------------------------------------------
% PAGE SETTINGS
% ----------------------------------------------------------------------------

\usepackage[left=3cm, right=1.5cm, vmargin=2cm, headheight=2cm]{geometry}
\linespread{1.5} % line spacing 1.5
\usepackage{indentfirst} % indent first paragraph
\setlength{\parindent}{1.25cm}
\sloppy

\frenchspacing % ???
\pagestyle{plain}
\usepackage{fancyhdr} % for headers and footers

% Ban dangling lines (ban single lines on a page)
\clubpenalty=10000
\widowpenalty=10000

% ----------------------------------------------------------------------------
% ATTACHMENTS SETTINGS
% ----------------------------------------------------------------------------

\usepackage[labelsep=endash]{caption}
%\setlength{\abovecaptionskip}{3pt}
%\setlength{\belowcaptionskip}{3pt}

\captionsetup[figure]{
    font={small}, % 12pt
    labelfont={normalfont},
    textfont={normalfont},
    justification=centering, % Center alignment
    singlelinecheck=true, % Centering even for one-line captions
    skip=6pt, % Spacing after the caption
}

\captionsetup[table]{
    font={normalsize},
    labelfont={it},
    textfont={it},
    justification=raggedright,
    singlelinecheck=false,
    skip=6pt,
}

% for non-end-to-end numbering
\usepackage{chngcntr}
%\counterwithin{figure}{section}
%\counterwithin{table}{section}

% for long table
\usepackage{longtable}
\newcommand{\conttable}[1]{\caption*{\leftline{Продолжение Таблицы~\ref{#1}}}}

% for graphics
\usepackage{graphicx}
\newcommand{\rref}[1]{(Рисунок~\ref{#1})}
\newcommand{\rdref}[2]{(Рисунки~\ref{#1}\,-\,\ref{#2})}
\newcommand{\tref}[1]{(Таблица~\ref{#1})}
\newcommand{\tdref}[2]{(Таблици~\ref{#1}\,-\,\ref{#2})}
\newcommand{\lref}[1]{(Листинг~\ref{#1})}
\newcommand{\ldref}[2]{(Листинги~\ref{#1}\,-\,\ref{#2})}

\newenvironment{image}{
	\begin{figure}[h!tp]
	\centering
}{
	\end{figure}
}
\newcommand\includegrph[2][width=0.8\textwidth]{\includegraphics[#1]{#2}}

\usepackage{tikz}  % powerful graphic creation
\usetikzlibrary{positioning, backgrounds}

\usepackage{amsmath} % more flexibility equations (use in title!!!)
\usepackage{pdfpages} % include pdf

% listings
\usepackage{listings}
\lstset{
	basicstyle=\ttfamily\footnotesize,
	backgroundcolor=\color{white},
	frame=single,
	framerule=0.5pt,
	rulecolor=\color{black},
	captionpos=t,
	tabsize=2,
	breaklines=true,
	breakatwhitespace=true,
	%numbers=left,
	%numberstyle=\tiny\color{gray},
	%stepnumber=1,
	%numbersep=10pt,
	columns=fullflexible,
    flexiblecolumns,
    keepspaces=true,
	showspaces=false,
	showstringspaces=false,
	showtabs=false,
    extendedchars=true,
	breakautoindent=true,
}

% ----------------------------------------------------------------------------
% HYPERREF SETTINGS
% ----------------------------------------------------------------------------

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=black,
    filecolor=magenta,      
    urlcolor=blue,
}

% ----------------------------------------------------------------------------
% ENUMERATION SETTINGS
% ----------------------------------------------------------------------------

\usepackage{enumitem}
\setlist{nosep}
\setlist[itemize]{
	leftmargin=0cm,
	itemindent=1.25cm,
	labelwidth=-0.6cm,
	label=--,
}

\setlist[enumerate]{
	leftmargin=0cm,
	itemindent=1.25cm,
	labelwidth=-0.65cm,
	label*=\arabic*.,
}

\setlist[description]{style=nextline}
\setlist[description]{
	leftmargin=0cm,
	itemindent=1.25cm,
	labelwidth=-0.65cm
}

% ----------------------------------------------------------------------------
% SECTION SETTINGS
% ----------------------------------------------------------------------------

\usepackage{titlesec}
\usepackage{etoolbox} % Header separator on a new page
\usepackage{needspace} % Parameter to prevent a gap between the title and the next paragraph

\titleformat{\chapter}[block]
  {\bfseries\fontsize{18pt}{20pt}\selectfont} % Bold, size 18pt
  {\thechapter}{1em}{\MakeUppercase} % numbering, indentation and uppercase 
  [\vspace{10pt}] % interval after the title

\titleformat{\section}[block]
  {\bfseries\fontsize{16pt}{18pt}\selectfont} % Bold, size 16pt
  {\thesection}{1em}{}

\titleformat{\subsection}[block]
  {\bfseries}
  {\thesubsection}{1em}{}

\titleformat{\subsubsection}[block]
  {\bfseries}
  {\thesubsubsection}{1em}{}

% Customizing indents and spacing
\titlespacing*{\chapter}
  {1.25cm}{0pt}{10pt} % Left indent 1.25 cm, spacing before 15pt, after 10pt
\titlespacing*{\section}
  {1.25cm}{15pt}{10pt}
\titlespacing*{\subsection}
  {1.25cm}{15pt}{10pt}
\titlespacing*{\subsubsection}
  {1.25cm}{15pt}{10pt}

% Header separator on a new page.
% Each new CHAPTER starts on a new page.
\preto\chapter{\clearpage}

% Prevent title and text breaks
% Do not break off the title from the following text
\preto\chapter{\needspace{5\baselineskip}}
\preto\section{\needspace{5\baselineskip}}
\preto\subsection{\needspace{5\baselineskip}}
\preto\subsubsection{\needspace{5\baselineskip}}

% ----------------------------------------------------------------------------
% TABLE OF CONTENTS
% ----------------------------------------------------------------------------

\usepackage{tocloft}

\setlength{\cftbeforetoctitleskip}{1.5em}
\setlength{\cftaftertoctitleskip}{1em}

\renewcommand{\cfttoctitlefont}{\hfill\Large}
\renewcommand{\cftaftertoctitle}{\hfill\hfill}

\renewcommand{\cftbeforesecskip}{0pt}

\renewcommand{\cftsecleader}{\cftdotfill{\cftdotsep}}
\renewcommand{\cftsubsecleader}{\cftdotfill{\cftdotsep}}

%\renewcommand{\cftchapfont}{\normalfont}
%\renewcommand{\cftsecfont}{\normalfont}

% ----------------------------------------------------------------------------
% BIBLIOGRAPHY
% https://www.ctan.org/pkg/biblatex-gost
% ----------------------------------------------------------------------------

%\usepackage[
	%parentracker=true,
	%backend=biber,
	%hyperref=false,
	%bibencoding=utf8,
	%style=gost-numeric,
	%language=auto,
	%autolang=other,
	%citestyle=gost-numeric,
	%defernumbers=true,
	%bibstyle=gost-numeric,
	%sorting=ntvy,
	%]{biblatex}

% ----------------------------------------------------------------------------
% NEW COMMAND
% ----------------------------------------------------------------------------

\providecommand{\No}{\textnumero}
\newcommand{\rarrow}{$\rightarrow$}

