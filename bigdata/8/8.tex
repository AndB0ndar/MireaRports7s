\documentclass[14pt,a4paper,oneside]{extarticle}

	\usepackage{cmap} % for pdfLaTeX
	\usepackage[T1,T2A]{fontenc} % correct encoding for pdfLaTeX
	\usepackage[utf8]{inputenc} % correct encoding source file
	\usepackage[english,russian]{babel} % correct language

	% -------------------
	% TEXT SETTINGS
	% -------------------

	\usepackage{fontspec} % use standart fonts (only for xelatex!!!)
	\setmainfont{Times New Roman}
	\setsansfont{Arial}
	\setmonofont[Scale=0.6]{Courier New}

	\usepackage[none]{hyphenat} % no word breaks

	\usepackage{setspace}
	%\singlespacing % 1.0
	\onehalfspacing % 1.5

	% -------------------
	% PAGE SETTINGS
	% -------------------

	\usepackage[left=3cm, right=1.5cm, vmargin=2cm, headheight=2cm]{geometry}
	\linespread{1.5} % line spacing 1.5
	\usepackage{indentfirst} % indent first paragraph
	\setlength{\parindent}{1.25cm}
	\sloppy

	\frenchspacing % ???
	\pagestyle{plain}
	\usepackage{fancyhdr} % for headers and footers

	\clubpenalty=10000
	\widowpenalty=10000

	% ------------------
	% ATTACHMENTS SETTINGS
	% ------------------

	\usepackage[labelsep=endash]{caption}
	%\setlength{\abovecaptionskip}{3pt}
	%\setlength{\belowcaptionskip}{3pt}

	% for non-end-to-end numbering
	%\usepackage{chngcntr}
	%\counterwithin{figure}{section}
	%\counterwithin{table}{section}

	% for long table
	\usepackage{longtable}

	% for graphics
	\usepackage{graphicx}
	\newcommand{\rref}[1]{(Рисунок~\ref{#1})}
	\newcommand{\rdref}[2]{(Рисунки~\ref{#1}\,-\,\ref{#2})}
	\newcommand{\tref}[1]{(Таблица~\ref{#1})}
	\newcommand{\tdref}[2]{(Таблици~\ref{#1}\,-\,\ref{#2})}
	\newenvironment{image}{
		\begin{figure}[h!tp]
		\centering
	}{
		\end{figure}
	}
	\newcommand\includegrph[2][width=0.8\textwidth]{\includegraphics[#1]{#2}}

	\usepackage{amsmath} % more flexibility equations (use in title!!!)
	\usepackage{pdfpages} % include pdf


	% ------------------
	% SECTION SETTINGS
	% ------------------

	\usepackage{titlesec}

	% section size
	\titleformat{\section}[block]
		{\fontsize{16pt}{20pt}\bfseries}{\thesection}{1em}{}
	\titleformat{\subsection}
		{\fontsize{14pt}{18pt}\bfseries}{\thesubsection}{1em}{}
	\titleformat{\subsubsection}
		{\fontsize{14pt}{18pt}\bfseries}{\thesubsubsection}{1em}{}
	\titlespacing*{\section}{1.25cm}{0pt}{0pt}
	\titlespacing*{\subsection}{1.25cm}{0pt}{0pt}
	\titlespacing*{\subsubsection}{1.25cm}{0pt}{0pt}
	\titlespacing*{\paragraph}{1.25cm}{0pt}{0pt}

	% ------------------
	% NEW COMMAND
	% ------------------

	\providecommand{\No}{\textnumero}

	% ------------------
	% ------------------

    \usepackage[breakable]{tcolorbox}
    

    \usepackage{graphicx}
    \usepackage{caption}

    \usepackage{xcolor} % Allow colors to be defined
    \usepackage{amsmath} % Equations
    \usepackage{amssymb} % Equations
    \usepackage{geometry} % Used to adjust the document margins

    \usepackage{fancyvrb} % verbatim replacement that allows latex

    \makeatletter % fix for old versions of grffile with XeLaTeX
    \@ifpackagelater{grffile}{2019/11/01}
    {
      % Do nothing on new versions
    }
    {
      \def\Gread@@xetex#1{%
        \IfFileExists{"\Gin@base".bb}%
        {\Gread@eps{\Gin@base.bb}}%
        {\Gread@@xetex@aux#1}%
      }
    }
    \makeatother
    \usepackage[Export]{adjustbox} % Used to constrain images to a maximum size
    \adjustboxset{max size={0.9\linewidth}{0.9\paperheight}}

    % The hyperref package gives us a pdf with properly built
    % internal navigation ('pdf bookmarks' for the table of contents,
    % internal cross-reference links, web links for URLs, etc.)
    \usepackage{hyperref}
    % The default LaTeX title has an obnoxious amount of whitespace. By default,
    % titling removes some of it. It also provides customization options.
    \usepackage{titling}
    \usepackage{longtable} % longtable support required by pandoc >1.10
    \usepackage{booktabs}  % table support for pandoc > 1.12.2
    \usepackage{array}     % table support for pandoc >= 2.11.3
    \usepackage{calc}      % table minipage width calculation for pandoc >= 2.11.1
    \usepackage[inline]{enumitem} % IRkernel/repr support (it uses the enumerate* environment)
    \usepackage[normalem]{ulem} % ulem is needed to support strikethroughs (\sout)
                                % normalem makes italics be italics, not underlines
    \usepackage{mathrsfs}
    

    
    % Colors for the hyperref package
    \definecolor{urlcolor}{rgb}{0,.145,.698}
    \definecolor{linkcolor}{rgb}{.71,0.21,0.01}
    \definecolor{citecolor}{rgb}{.12,.54,.11}

    % ANSI colors
    \definecolor{ansi-black}{HTML}{3E424D}
    \definecolor{ansi-black-intense}{HTML}{282C36}
    \definecolor{ansi-red}{HTML}{E75C58}
    \definecolor{ansi-red-intense}{HTML}{B22B31}
    \definecolor{ansi-green}{HTML}{00A250}
    \definecolor{ansi-green-intense}{HTML}{007427}
    \definecolor{ansi-yellow}{HTML}{DDB62B}
    \definecolor{ansi-yellow-intense}{HTML}{B27D12}
    \definecolor{ansi-blue}{HTML}{208FFB}
    \definecolor{ansi-blue-intense}{HTML}{0065CA}
    \definecolor{ansi-magenta}{HTML}{D160C4}
    \definecolor{ansi-magenta-intense}{HTML}{A03196}
    \definecolor{ansi-cyan}{HTML}{60C6C8}
    \definecolor{ansi-cyan-intense}{HTML}{258F8F}
    \definecolor{ansi-white}{HTML}{C5C1B4}
    \definecolor{ansi-white-intense}{HTML}{A1A6B2}
    \definecolor{ansi-default-inverse-fg}{HTML}{FFFFFF}
    \definecolor{ansi-default-inverse-bg}{HTML}{000000}

    % common color for the border for error outputs.
    \definecolor{outerrorbackground}{HTML}{FFDFDF}

    % commands and environments needed by pandoc snippets
    % extracted from the output of `pandoc -s`
    \providecommand{\tightlist}{%
      \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
    \DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
    % Add ',fontsize=\small' for more characters per line
    \newenvironment{Shaded}{}{}
    \newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.56,0.13,0.00}{{#1}}}
    \newcommand{\DecValTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\FloatTok}[1]{\textcolor[rgb]{0.25,0.63,0.44}{{#1}}}
    \newcommand{\CharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\StringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\CommentTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textit{{#1}}}}
    \newcommand{\OtherTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{{#1}}}
    \newcommand{\AlertTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.02,0.16,0.49}{{#1}}}
    \newcommand{\RegionMarkerTok}[1]{{#1}}
    \newcommand{\ErrorTok}[1]{\textcolor[rgb]{1.00,0.00,0.00}{\textbf{{#1}}}}
    \newcommand{\NormalTok}[1]{{#1}}

    % Additional commands for more recent versions of Pandoc
    \newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.53,0.00,0.00}{{#1}}}
    \newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.25,0.44,0.63}{{#1}}}
    \newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.73,0.40,0.53}{{#1}}}
    \newcommand{\ImportTok}[1]{{#1}}
    \newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.73,0.13,0.13}{\textit{{#1}}}}
    \newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\VariableTok}[1]{\textcolor[rgb]{0.10,0.09,0.49}{{#1}}}
    \newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.00,0.44,0.13}{\textbf{{#1}}}}
    \newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.40,0.40,0.40}{{#1}}}
    \newcommand{\BuiltInTok}[1]{{#1}}
    \newcommand{\ExtensionTok}[1]{{#1}}
    \newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.74,0.48,0.00}{{#1}}}
    \newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.49,0.56,0.16}{{#1}}}
    \newcommand{\InformationTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}
    \newcommand{\WarningTok}[1]{\textcolor[rgb]{0.38,0.63,0.69}{\textbf{\textit{{#1}}}}}

    
    
    
    
	% Pygments definitions
	\makeatletter
	\def\PY@reset{\let\PY@it=\relax \let\PY@bf=\relax%
		\let\PY@ul=\relax \let\PY@tc=\relax%
		\let\PY@bc=\relax \let\PY@ff=\relax}
	\def\PY@tok#1{\csname PY@tok@#1\endcsname}
	\def\PY@toks#1+{\ifx\relax#1\empty\else%
		\PY@tok{#1}\expandafter\PY@toks\fi}
	\def\PY@do#1{\PY@bc{\PY@tc{\PY@ul{%
		\PY@it{\PY@bf{\PY@ff{#1}}}}}}}
	\def\PY#1#2{\PY@reset\PY@toks#1+\relax+\PY@do{#2}}

	\@namedef{PY@tok@w}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.73,0.73}{##1}}}
	\@namedef{PY@tok@c}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
	\@namedef{PY@tok@cp}{\def\PY@tc##1{\textcolor[rgb]{0.61,0.40,0.00}{##1}}}
	\@namedef{PY@tok@k}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@kp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@kt}{\def\PY@tc##1{\textcolor[rgb]{0.69,0.00,0.25}{##1}}}
	\@namedef{PY@tok@o}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@ow}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
	\@namedef{PY@tok@nb}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@nf}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
	\@namedef{PY@tok@nc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
	\@namedef{PY@tok@nn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
	\@namedef{PY@tok@ne}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.80,0.25,0.22}{##1}}}
	\@namedef{PY@tok@nv}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
	\@namedef{PY@tok@no}{\def\PY@tc##1{\textcolor[rgb]{0.53,0.00,0.00}{##1}}}
	\@namedef{PY@tok@nl}{\def\PY@tc##1{\textcolor[rgb]{0.46,0.46,0.00}{##1}}}
	\@namedef{PY@tok@ni}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
	\@namedef{PY@tok@na}{\def\PY@tc##1{\textcolor[rgb]{0.41,0.47,0.13}{##1}}}
	\@namedef{PY@tok@nt}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@nd}{\def\PY@tc##1{\textcolor[rgb]{0.67,0.13,1.00}{##1}}}
	\@namedef{PY@tok@s}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@sd}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@si}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
	\@namedef{PY@tok@se}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.67,0.36,0.12}{##1}}}
	\@namedef{PY@tok@sr}{\def\PY@tc##1{\textcolor[rgb]{0.64,0.35,0.47}{##1}}}
	\@namedef{PY@tok@ss}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
	\@namedef{PY@tok@sx}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@m}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@gh}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
	\@namedef{PY@tok@gu}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.50,0.00,0.50}{##1}}}
	\@namedef{PY@tok@gd}{\def\PY@tc##1{\textcolor[rgb]{0.63,0.00,0.00}{##1}}}
	\@namedef{PY@tok@gi}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.52,0.00}{##1}}}
	\@namedef{PY@tok@gr}{\def\PY@tc##1{\textcolor[rgb]{0.89,0.00,0.00}{##1}}}
	\@namedef{PY@tok@ge}{\let\PY@it=\textit}
	\@namedef{PY@tok@gs}{\let\PY@bf=\textbf}
	\@namedef{PY@tok@gp}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,0.50}{##1}}}
	\@namedef{PY@tok@go}{\def\PY@tc##1{\textcolor[rgb]{0.44,0.44,0.44}{##1}}}
	\@namedef{PY@tok@gt}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.27,0.87}{##1}}}
	\@namedef{PY@tok@err}{\def\PY@bc##1{{\setlength{\fboxsep}{\string -\fboxrule}\fcolorbox[rgb]{1.00,0.00,0.00}{1,1,1}{\strut ##1}}}}
	\@namedef{PY@tok@kc}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@kd}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@kn}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@kr}{\let\PY@bf=\textbf\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@bp}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.50,0.00}{##1}}}
	\@namedef{PY@tok@fm}{\def\PY@tc##1{\textcolor[rgb]{0.00,0.00,1.00}{##1}}}
	\@namedef{PY@tok@vc}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
	\@namedef{PY@tok@vg}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
	\@namedef{PY@tok@vi}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
	\@namedef{PY@tok@vm}{\def\PY@tc##1{\textcolor[rgb]{0.10,0.09,0.49}{##1}}}
	\@namedef{PY@tok@sa}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@sb}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@sc}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@dl}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@s2}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@sh}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@s1}{\def\PY@tc##1{\textcolor[rgb]{0.73,0.13,0.13}{##1}}}
	\@namedef{PY@tok@mb}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@mf}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@mh}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@mi}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@il}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@mo}{\def\PY@tc##1{\textcolor[rgb]{0.40,0.40,0.40}{##1}}}
	\@namedef{PY@tok@ch}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
	\@namedef{PY@tok@cm}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
	\@namedef{PY@tok@cpf}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
	\@namedef{PY@tok@c1}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}
	\@namedef{PY@tok@cs}{\let\PY@it=\textit\def\PY@tc##1{\textcolor[rgb]{0.24,0.48,0.48}{##1}}}

	\def\PYZbs{\char`\\}
	\def\PYZus{\char`\_}
	\def\PYZob{\char`\{}
	\def\PYZcb{\char`\}}
	\def\PYZca{\char`\^}
	\def\PYZam{\char`\&}
	\def\PYZlt{\char`\<}
	\def\PYZgt{\char`\>}
	\def\PYZsh{\char`\#}
	\def\PYZpc{\char`\%}
	\def\PYZdl{\char`\$}
	\def\PYZhy{\char`\-}
	\def\PYZsq{\char`\'}
	\def\PYZdq{\char`\"}
	\def\PYZti{\char`\~}
	% for compatibility with earlier versions
	\def\PYZat{@}
	\def\PYZlb{[}
	\def\PYZrb{]}
	\makeatother


    % For linebreaks inside Verbatim environment from package fancyvrb.
    \makeatletter
        \newbox\Wrappedcontinuationbox
        \newbox\Wrappedvisiblespacebox
        \newcommand*\Wrappedvisiblespace {\textcolor{red}{\textvisiblespace}}
        \newcommand*\Wrappedcontinuationsymbol {\textcolor{red}{\llap{\tiny$\m@th\hookrightarrow$}}}
        \newcommand*\Wrappedcontinuationindent {3ex }
        \newcommand*\Wrappedafterbreak {\kern\Wrappedcontinuationindent\copy\Wrappedcontinuationbox}
        % Take advantage of the already applied Pygments mark-up to insert
        % potential linebreaks for TeX processing.
        %        {, <, #, %, $, ' and ": go to next line.
        %        _, }, ^, &, >, - and ~: stay at end of broken line.
        % Use of \textquotesingle for straight quote.
        \newcommand*\Wrappedbreaksatspecials {%
            \def\PYGZus{\discretionary{\char`\_}{\Wrappedafterbreak}{\char`\_}}%
            \def\PYGZob{\discretionary{}{\Wrappedafterbreak\char`\{}{\char`\{}}%
            \def\PYGZcb{\discretionary{\char`\}}{\Wrappedafterbreak}{\char`\}}}%
            \def\PYGZca{\discretionary{\char`\^}{\Wrappedafterbreak}{\char`\^}}%
            \def\PYGZam{\discretionary{\char`\&}{\Wrappedafterbreak}{\char`\&}}%
            \def\PYGZlt{\discretionary{}{\Wrappedafterbreak\char`\<}{\char`\<}}%
            \def\PYGZgt{\discretionary{\char`\>}{\Wrappedafterbreak}{\char`\>}}%
            \def\PYGZsh{\discretionary{}{\Wrappedafterbreak\char`\#}{\char`\#}}%
            \def\PYGZpc{\discretionary{}{\Wrappedafterbreak\char`\%}{\char`\%}}%
            \def\PYGZdl{\discretionary{}{\Wrappedafterbreak\char`\$}{\char`\$}}%
            \def\PYGZhy{\discretionary{\char`\-}{\Wrappedafterbreak}{\char`\-}}%
            \def\PYGZsq{\discretionary{}{\Wrappedafterbreak\textquotesingle}{\textquotesingle}}%
            \def\PYGZdq{\discretionary{}{\Wrappedafterbreak\char`\"}{\char`\"}}%
            \def\PYGZti{\discretionary{\char`\~}{\Wrappedafterbreak}{\char`\~}}%
        }
        % Some characters . , ; ? ! / are not pygmentized.
        % This macro makes them "active" and they will insert potential linebreaks
        \newcommand*\Wrappedbreaksatpunct {%
            \lccode`\~`\.\lowercase{\def~}{\discretionary{\hbox{\char`\.}}{\Wrappedafterbreak}{\hbox{\char`\.}}}%
            \lccode`\~`\,\lowercase{\def~}{\discretionary{\hbox{\char`\,}}{\Wrappedafterbreak}{\hbox{\char`\,}}}%
            \lccode`\~`\;\lowercase{\def~}{\discretionary{\hbox{\char`\;}}{\Wrappedafterbreak}{\hbox{\char`\;}}}%
            \lccode`\~`\:\lowercase{\def~}{\discretionary{\hbox{\char`\:}}{\Wrappedafterbreak}{\hbox{\char`\:}}}%
            \lccode`\~`\?\lowercase{\def~}{\discretionary{\hbox{\char`\?}}{\Wrappedafterbreak}{\hbox{\char`\?}}}%
            \lccode`\~`\!\lowercase{\def~}{\discretionary{\hbox{\char`\!}}{\Wrappedafterbreak}{\hbox{\char`\!}}}%
            \lccode`\~`\/\lowercase{\def~}{\discretionary{\hbox{\char`\/}}{\Wrappedafterbreak}{\hbox{\char`\/}}}%
            \catcode`\.\active
            \catcode`\,\active
            \catcode`\;\active
            \catcode`\:\active
            \catcode`\?\active
            \catcode`\!\active
            \catcode`\/\active
            \lccode`\~`\~
        }
    \makeatother

    \let\OriginalVerbatim=\Verbatim
    \makeatletter
    \renewcommand{\Verbatim}[1][1]{%
        %\parskip\z@skip
        \sbox\Wrappedcontinuationbox {\Wrappedcontinuationsymbol}%
        \sbox\Wrappedvisiblespacebox {\FV@SetupFont\Wrappedvisiblespace}%
        \def\FancyVerbFormatLine ##1{\hsize\linewidth
            \vtop{\raggedright\hyphenpenalty\z@\exhyphenpenalty\z@
                \doublehyphendemerits\z@\finalhyphendemerits\z@
                \strut ##1\strut}%
        }%
        % If the linebreak is at a space, the latter will be displayed as visible
        % space at end of first line, and a continuation symbol starts next line.
        % Stretch/shrink are however usually zero for typewriter font.
        \def\FV@Space {%
            \nobreak\hskip\z@ plus\fontdimen3\font minus\fontdimen4\font
            \discretionary{\copy\Wrappedvisiblespacebox}{\Wrappedafterbreak}
            {\kern\fontdimen2\font}%
        }%

        % Allow breaks at special characters using \PYG... macros.
        \Wrappedbreaksatspecials
        % Breaks at punctuation characters . , ; ? ! and / need catcode=\active
        \OriginalVerbatim[#1,codes*=\Wrappedbreaksatpunct]%
    }
    \makeatother

    % Exact colors from NB
    \definecolor{incolor}{HTML}{303F9F}
    \definecolor{outcolor}{HTML}{D84315}
    \definecolor{cellborder}{HTML}{CFCFCF}
    \definecolor{cellbackground}{HTML}{F7F7F7}

    % prompt
    \makeatletter
    \newcommand{\boxspacing}{\kern\kvtcb@left@rule\kern\kvtcb@boxsep}
    \makeatother
    \newcommand{\prompt}[4]{
        {\ttfamily\llap{{\color{#2}[#3]:\hspace{3pt}#4}}\vspace{-\baselineskip}}
    }
    

    
    % Prevent overflowing lines due to hard-to-break entities
    \sloppy
    % Setup hyperref package
    \hypersetup{
      breaklinks=true,  % so long urls are correctly broken across lines
      colorlinks=true,
      urlcolor=urlcolor,
      linkcolor=linkcolor,
      citecolor=citecolor,
      }
    

\begin{document}
    
\include{./res/title.tex}
    
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{1}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{import} \PY{n+nn}{pandas} \PY{k}{as} \PY{n+nn}{pd}
\PY{k+kn}{import} \PY{n+nn}{matplotlib}\PY{n+nn}{.}\PY{n+nn}{pyplot} \PY{k}{as} \PY{n+nn}{plt}
\PY{k+kn}{from} \PY{n+nn}{collections} \PY{k+kn}{import} \PY{n}{Counter}
\PY{k+kn}{import} \PY{n+nn}{time}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{market_basket_optimisation}{%
\section{Market\_Basket\_Optimisation}\label{market_basket_optimisation}}

    \hypertarget{ux437ux430ux433ux440ux443ux437ux43aux430-ux434ux430ux43dux43dux44bux445}{%
\subsection{Загрузка
данных}\label{ux437ux430ux433ux440ux443ux437ux43aux430-ux434ux430ux43dux43dux44bux445}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{2}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{./8/Market\PYZus{}Basket\PYZus{}Optimisation.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}
\PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{2}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
              0          1           2                 3             4   \textbackslash{}
0         shrimp    almonds     avocado    vegetables mix  green grapes
1        burgers  meatballs        eggs               NaN           NaN
2        chutney        NaN         NaN               NaN           NaN
3         turkey    avocado         NaN               NaN           NaN
4  mineral water       milk  energy bar  whole wheat rice     green tea
                 5     6               7             8             9   \textbackslash{}
0  whole weat flour  yams  cottage cheese  energy drink  tomato juice
1               NaN   NaN             NaN           NaN           NaN
2               NaN   NaN             NaN           NaN           NaN
3               NaN   NaN             NaN           NaN           NaN
4               NaN   NaN             NaN           NaN           NaN
               10         11     12     13             14      15  \textbackslash{}
0  low fat yogurt  green tea  honey  salad  mineral water  salmon
1             NaN        NaN    NaN    NaN            NaN     NaN
2             NaN        NaN    NaN    NaN            NaN     NaN
3             NaN        NaN    NaN    NaN            NaN     NaN
4             NaN        NaN    NaN    NaN            NaN     NaN
                  16               17       18         19
0  antioxydant juice  frozen smoothie  spinach  olive oil
1                NaN              NaN      NaN        NaN
2                NaN              NaN      NaN        NaN
3                NaN              NaN      NaN        NaN
4                NaN              NaN      NaN        NaN
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{3}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 7501 entries, 0 to 7500
Data columns (total 20 columns):
 \#   Column  Non-Null Count  Dtype
---  ------  --------------  -----
 0   0       7501 non-null   object
 1   1       5747 non-null   object
 2   2       4389 non-null   object
 3   3       3345 non-null   object
 4   4       2529 non-null   object
 5   5       1864 non-null   object
 6   6       1369 non-null   object
 7   7       981 non-null    object
 8   8       654 non-null    object
 9   9       395 non-null    object
 10  10      256 non-null    object
 11  11      154 non-null    object
 12  12      87 non-null     object
 13  13      47 non-null     object
 14  14      25 non-null     object
 15  15      8 non-null      object
 16  16      4 non-null      object
 17  17      4 non-null      object
 18  18      3 non-null      object
 19  19      1 non-null      object
dtypes: object(20)
memory usage: 1.1+ MB
    \end{Verbatim}

    \hypertarget{ux441ux43eux437ux434ux430ux43dux438ux435-ux441ux43fux438ux441ux43aux430-ux442ux440ux430ux43dux437ux430ux43aux446ux438ux439}{%
\subsection{Создание списка
транзакций}\label{ux441ux43eux437ux434ux430ux43dux438ux435-ux441ux43fux438ux441ux43aux430-ux442ux440ux430ux43dux437ux430ux43aux446ux438ux439}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{4}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{transactions} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{x}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{ux433ux438ux43fux435ux440ux43fux430ux440ux430ux43cux435ux442ux440ux44b}{%
\subsection{Гиперпараметры}\label{ux433ux438ux43fux435ux440ux43fux430ux440ux430ux43cux435ux442ux440ux44b}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{5}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{min\PYZus{}support} \PY{o}{=} \PY{l+m+mf}{0.04}
\PY{n}{min\PYZus{}confidence} \PY{o}{=} \PY{l+m+mf}{0.2}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{ux432ux438ux437ux443ux430ux43bux438ux437ux430ux446ux438ux44f}{%
\subsection{Визуализация}\label{ux432ux438ux437ux443ux430ux43bux438ux437ux430ux446ux438ux44f}}

Визуализируем данные для лучшего представления. Посчитаем количество
покупок конкретных лекарств во всех чеках.

Также выполним нормализацию, чтобы вывести относительную частоту
встречаемости.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{6}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df}\PY{o}{.}\PY{n}{stack}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{6}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
mineral water    1788
eggs             1348
spaghetti        1306
french fries     1282
chocolate        1230
                 {\ldots}
bramble            14
cream               7
napkins             5
water spray         3
 asparagus          1
Length: 120, dtype: int64
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{7}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df}\PY{o}{.}\PY{n}{stack}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{n}{normalize}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{7}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
mineral water    0.060893
eggs             0.045908
spaghetti        0.044478
french fries     0.043660
chocolate        0.041889
                   {\ldots}
bramble          0.000477
cream            0.000238
napkins          0.000170
water spray      0.000102
 asparagus       0.000034
Length: 120, dtype: float64
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{8}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{item\PYZus{}counts} \PY{o}{=} \PY{n}{Counter}\PY{p}{(}\PY{n}{item} \PY{k}{for} \PY{n}{transaction} \PY{o+ow}{in} \PY{n}{transactions} \PY{k}{for} \PY{n}{item} \PY{o+ow}{in} \PY{n}{transaction}\PY{p}{)}
\PY{n}{most\PYZus{}common\PYZus{}items} \PY{o}{=} \PY{n}{item\PYZus{}counts}\PY{o}{.}\PY{n}{most\PYZus{}common}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{)}
\PY{n}{items}\PY{p}{,} \PY{n}{counts} \PY{o}{=} \PY{n+nb}{zip}\PY{p}{(}\PY{o}{*}\PY{n}{most\PYZus{}common\PYZus{}items}\PY{p}{)}
\PY{n}{fig}\PY{p}{,} \PY{n}{axs} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{13}\PY{p}{,} \PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{items}\PY{p}{,} \PY{n}{counts}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{skyblue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Фактическая частота товаров}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Товары}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Частота}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{relative\PYZus{}counts} \PY{o}{=} \PY{p}{[}\PY{n}{count} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{item\PYZus{}counts}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{count} \PY{o+ow}{in} \PY{n}{counts}\PY{p}{]}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{items}\PY{p}{,} \PY{n}{relative\PYZus{}counts}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lightgreen}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Относительная частота товаров}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Товары}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Относительная частота}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_12_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{apyori-python}{%
\subsection{Apyori Python}\label{apyori-python}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{9}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{!}pip install apriori\PYZhy{}python
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{10}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{apriori\PYZus{}python} \PY{k+kn}{import} \PY{n}{apriori} \PY{k}{as} \PY{n}{py\PYZus{}apriori}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{11}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{t1}\PY{p}{,} \PY{n}{rules\PYZus{}apriori\PYZus{}python} \PY{o}{=} \PY{n}{py\PYZus{}apriori}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{minSup}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{minConf}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{)}
\PY{n}{apriori\PYZus{}python\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{12}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{rules\PYZus{}apriori\PYZus{}python}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{12}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
[[\{'mineral water'\}, \{'milk'\}, 0.20134228187919462],
 [\{'mineral water'\}, \{'eggs'\}, 0.21364653243847875],
 [\{'mineral water'\}, \{'chocolate'\}, 0.220917225950783],
 [\{'mineral water'\}, \{'spaghetti'\}, 0.2505592841163311],
 [\{'eggs'\}, \{'mineral water'\}, 0.28338278931750743],
 [\{'chocolate'\}, \{'mineral water'\}, 0.3213995117982099],
 [\{'spaghetti'\}, \{'mineral water'\}, 0.3430321592649311],
 [\{'milk'\}, \{'mineral water'\}, 0.37037037037037035],
 [\{'ground beef'\}, \{'mineral water'\}, 0.41655359565807326]]
\end{Verbatim}
\end{tcolorbox}
        
    \hypertarget{apyori}{%
\subsection{Apyori}\label{apyori}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{13}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{!}pip install apyori
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{14}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{apyori} \PY{k+kn}{import} \PY{n}{apriori}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{15}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{rules\PYZus{}apriori} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{apriori}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{min\PYZus{}support}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{min\PYZus{}confidence}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{,} \PY{n}{min\PYZus{}lift}\PY{o}{=}\PY{l+m+mf}{1.0001}\PY{p}{)}\PY{p}{)}
\PY{n}{apriori\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{16}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{rules\PYZus{}apriori}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{16}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
[RelationRecord(items=frozenset(\{'chocolate', 'mineral water'\}),
support=0.05265964538061592,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'chocolate'\}),
items\_add=frozenset(\{'mineral water'\}), confidence=0.3213995117982099,
lift=1.3483320682317521), OrderedStatistic(items\_base=frozenset(\{'mineral
water'\}), items\_add=frozenset(\{'chocolate'\}), confidence=0.220917225950783,
lift=1.348332068231752)]),
 RelationRecord(items=frozenset(\{'mineral water', 'eggs'\}),
support=0.05092654312758299,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'eggs'\}),
items\_add=frozenset(\{'mineral water'\}), confidence=0.28338278931750743,
lift=1.188844688294532), OrderedStatistic(items\_base=frozenset(\{'mineral
water'\}), items\_add=frozenset(\{'eggs'\}), confidence=0.21364653243847875,
lift=1.188844688294532)]),
 RelationRecord(items=frozenset(\{'mineral water', 'ground beef'\}),
support=0.040927876283162246,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'ground beef'\}),
items\_add=frozenset(\{'mineral water'\}), confidence=0.41655359565807326,
lift=1.7475215442008991)]),
 RelationRecord(items=frozenset(\{'mineral water', 'milk'\}),
support=0.04799360085321957,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'milk'\}),
items\_add=frozenset(\{'mineral water'\}), confidence=0.3703703703703704,
lift=1.5537741320739085), OrderedStatistic(items\_base=frozenset(\{'mineral
water'\}), items\_add=frozenset(\{'milk'\}), confidence=0.20134228187919462,
lift=1.5537741320739085)]),
 RelationRecord(items=frozenset(\{'spaghetti', 'mineral water'\}),
support=0.05972536995067324,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'mineral water'\}),
items\_add=frozenset(\{'spaghetti'\}), confidence=0.2505592841163311,
lift=1.4390851379453289), OrderedStatistic(items\_base=frozenset(\{'spaghetti'\}),
items\_add=frozenset(\{'mineral water'\}), confidence=0.3430321592649311,
lift=1.4390851379453289)])]
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{17}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{result} \PY{o+ow}{in} \PY{n}{rules\PYZus{}apriori}\PY{p}{:}
    \PY{k}{for} \PY{n}{subset} \PY{o+ow}{in} \PY{n}{result}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Support: }\PY{l+s+si}{\PYZob{}0\PYZcb{}}\PY{l+s+s2}{; Confidence: }\PY{l+s+si}{\PYZob{}1\PYZcb{}}\PY{l+s+s2}{; Lift: }\PY{l+s+si}{\PYZob{}2\PYZcb{}}\PY{l+s+s2}{;}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{result}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,}\PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{,} \PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
frozenset(\{'chocolate'\}) frozenset(\{'mineral water'\})
Support: 0.05265964538061592; Confidence: 0.3213995117982099; Lift:
1.3483320682317521;
frozenset(\{'mineral water'\}) frozenset(\{'chocolate'\})
Support: 0.05265964538061592; Confidence: 0.220917225950783; Lift:
1.348332068231752;
frozenset(\{'eggs'\}) frozenset(\{'mineral water'\})
Support: 0.05092654312758299; Confidence: 0.28338278931750743; Lift:
1.188844688294532;
frozenset(\{'mineral water'\}) frozenset(\{'eggs'\})
Support: 0.05092654312758299; Confidence: 0.21364653243847875; Lift:
1.188844688294532;
frozenset(\{'ground beef'\}) frozenset(\{'mineral water'\})
Support: 0.040927876283162246; Confidence: 0.41655359565807326; Lift:
1.7475215442008991;
frozenset(\{'milk'\}) frozenset(\{'mineral water'\})
Support: 0.04799360085321957; Confidence: 0.3703703703703704; Lift:
1.5537741320739085;
frozenset(\{'mineral water'\}) frozenset(\{'milk'\})
Support: 0.04799360085321957; Confidence: 0.20134228187919462; Lift:
1.5537741320739085;
frozenset(\{'mineral water'\}) frozenset(\{'spaghetti'\})
Support: 0.05972536995067324; Confidence: 0.2505592841163311; Lift:
1.4390851379453289;
frozenset(\{'spaghetti'\}) frozenset(\{'mineral water'\})
Support: 0.05972536995067324; Confidence: 0.3430321592649311; Lift:
1.4390851379453289;
    \end{Verbatim}

    \hypertarget{efficient-apriori}{%
\subsection{Efficient Apriori}\label{efficient-apriori}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{18}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{!}pip install efficient\PYZhy{}apriori
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{19}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{efficient\PYZus{}apriori} \PY{k+kn}{import} \PY{n}{apriori} \PY{k}{as} \PY{n}{eff\PYZus{}apriori}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{20}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{itemsets}\PY{p}{,} \PY{n}{rules\PYZus{}efficient} \PY{o}{=} \PY{n}{eff\PYZus{}apriori}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{min\PYZus{}support}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{min\PYZus{}confidence}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{)}
\PY{n}{efficient\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{21}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{rules\PYZus{}efficient}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{rules\PYZus{}efficient}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
\{mineral water\} -> \{chocolate\} (conf: 0.221, supp: 0.053, lift: 1.348, conv:
1.073)
\{chocolate\} -> \{mineral water\} (conf: 0.321, supp: 0.053, lift: 1.348, conv:
1.122)
\{mineral water\} -> \{eggs\} (conf: 0.214, supp: 0.051, lift: 1.189, conv: 1.043)
\{eggs\} -> \{mineral water\} (conf: 0.283, supp: 0.051, lift: 1.189, conv: 1.063)
\{ground beef\} -> \{mineral water\} (conf: 0.417, supp: 0.041, lift: 1.748, conv:
1.305)
\{mineral water\} -> \{milk\} (conf: 0.201, supp: 0.048, lift: 1.554, conv: 1.090)
\{milk\} -> \{mineral water\} (conf: 0.370, supp: 0.048, lift: 1.554, conv: 1.210)
\{spaghetti\} -> \{mineral water\} (conf: 0.343, supp: 0.060, lift: 1.439, conv:
1.159)
\{mineral water\} -> \{spaghetti\} (conf: 0.251, supp: 0.060, lift: 1.439, conv:
1.102)
    \end{Verbatim}

    \hypertarget{fp-growth}{%
\subsection{FP-Growth}\label{fp-growth}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{22}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{o}{!}pip install fpgrowth\PYZhy{}py
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{23}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k+kn}{from} \PY{n+nn}{fpgrowth\PYZus{}py} \PY{k+kn}{import} \PY{n}{fpgrowth}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{24}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{itemsets}\PY{p}{,} \PY{n}{rules\PYZus{}fpgrowth} \PY{o}{=} \PY{n}{fpgrowth}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{minSupRatio}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{minConf}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{)}
\PY{n}{fp\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{25}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{rules\PYZus{}fpgrowth}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{rules\PYZus{}fpgrowth}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
[\{'ground beef'\}, \{'mineral water'\}, 0.41655359565807326]
[\{'mineral water'\}, \{'milk'\}, 0.20134228187919462]
[\{'milk'\}, \{'mineral water'\}, 0.37037037037037035]
[\{'chocolate'\}, \{'mineral water'\}, 0.3213995117982099]
[\{'mineral water'\}, \{'chocolate'\}, 0.220917225950783]
[\{'mineral water'\}, \{'spaghetti'\}, 0.2505592841163311]
[\{'spaghetti'\}, \{'mineral water'\}, 0.3430321592649311]
[\{'mineral water'\}, \{'eggs'\}, 0.21364653243847875]
[\{'eggs'\}, \{'mineral water'\}, 0.28338278931750743]
    \end{Verbatim}

    \hypertarget{ux430ux43dux430ux43bux438ux437-ux440ux435ux437ux443ux43bux44cux442ux430ux442ux43eux432}{%
\subsection{Анализ
результатов}\label{ux430ux43dux430ux43bux438ux437-ux440ux435ux437ux443ux43bux44cux442ux430ux442ux43eux432}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{26}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{times} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Apyori}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{apriori\PYZus{}time}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Efficient Apriori}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{efficient\PYZus{}time}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Apriori Python}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{apriori\PYZus{}python\PYZus{}time}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FP\PYZhy{}Growth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{fp\PYZus{}time}\PY{p}{,}
\PY{p}{\PYZcb{}}

\PY{c+c1}{\PYZsh{} Построение гистограммы}
\PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{8}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{times}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{times}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{skyblue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{orange}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{red}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Сравнение времени выполнения алгоритмов}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Время (сек)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}

\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Время выполнения алгоритмов:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{times}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_35_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
Время выполнения алгоритмов: \{'Apyori': 0.012447761999283102, 'Efficient
Apriori': 0.010668557999451878, 'Apriori Python': 0.6471120049991441, 'FP-
Growth': 0.11833883800136391\}
    \end{Verbatim}

    \hypertarget{data}{%
\section{data}\label{data}}

    \hypertarget{ux437ux430ux433ux440ux443ux437ux43aux430-ux434ux430ux43dux43dux44bux445}{%
\subsection{Загрузка
данных}\label{ux437ux430ux433ux440ux443ux437ux43aux430-ux434ux430ux43dux43dux44bux445}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{27}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df} \PY{o}{=} \PY{n}{pd}\PY{o}{.}\PY{n}{read\PYZus{}csv}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{./8/data.csv}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{header}\PY{o}{=}\PY{k+kc}{None}\PY{p}{)}
\PY{n}{df}\PY{o}{.}\PY{n}{head}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{27}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
              0             1        2    3    4    5    6    7    8    9   \textbackslash{}
0          Bread           NaN      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN
1   Scandinavian  Scandinavian      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN
2  Hot chocolate           Jam  Cookies  NaN  NaN  NaN  NaN  NaN  NaN  NaN
3         Muffin           NaN      NaN  NaN  NaN  NaN  NaN  NaN  NaN  NaN
4         Coffee        Pastry    Bread  NaN  NaN  NaN  NaN  NaN  NaN  NaN

    10   11
0  NaN  NaN
1  NaN  NaN
2  NaN  NaN
3  NaN  NaN
4  NaN  NaN
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{28}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df}\PY{o}{.}\PY{n}{info}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
<class 'pandas.core.frame.DataFrame'>
RangeIndex: 9531 entries, 0 to 9530
Data columns (total 12 columns):
 \#   Column  Non-Null Count  Dtype
---  ------  --------------  -----
 0   0       9208 non-null   object
 1   1       5840 non-null   object
 2   2       2959 non-null   object
 3   3       1505 non-null   object
 4   4       596 non-null    object
 5   5       245 non-null    object
 6   6       91 non-null     object
 7   7       36 non-null     object
 8   8       13 non-null     object
 9   9       9 non-null      object
 10  10      4 non-null      object
 11  11      1 non-null      object
dtypes: object(12)
memory usage: 893.7+ KB
    \end{Verbatim}

    \hypertarget{ux441ux43eux437ux434ux430ux43dux438ux435-ux441ux43fux438ux441ux43aux430-ux442ux440ux430ux43dux437ux430ux43aux446ux438ux439}{%
\subsection{Создание списка
транзакций}\label{ux441ux43eux437ux434ux430ux43dux438ux435-ux441ux43fux438ux441ux43aux430-ux442ux440ux430ux43dux437ux430ux43aux446ux438ux439}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{29}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{transactions} \PY{o}{=} \PY{n}{df}\PY{o}{.}\PY{n}{apply}\PY{p}{(}\PY{k}{lambda} \PY{n}{x}\PY{p}{:} \PY{n}{x}\PY{o}{.}\PY{n}{dropna}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{axis}\PY{o}{=}\PY{l+m+mi}{1}\PY{p}{)}\PY{o}{.}\PY{n}{tolist}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{ux433ux438ux43fux435ux440ux43fux430ux440ux430ux43cux435ux442ux440ux44b}{%
\subsection{Гиперпараметры}\label{ux433ux438ux43fux435ux440ux43fux430ux440ux430ux43cux435ux442ux440ux44b}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{30}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{min\PYZus{}support} \PY{o}{=} \PY{l+m+mf}{0.02}
\PY{n}{min\PYZus{}confidence} \PY{o}{=} \PY{l+m+mf}{0.3}
\end{Verbatim}
\end{tcolorbox}

    \hypertarget{ux432ux438ux437ux443ux430ux43bux438ux437ux430ux446ux438ux44f}{%
\subsection{Визуализация}\label{ux432ux438ux437ux443ux430ux43bux438ux437ux430ux446ux438ux44f}}

Визуализируем данные для лучшего представления. Посчитаем количество
покупок конкретных лекарств во всех чеках.

Также выполним нормализацию, чтобы вывести относительную частоту
встречаемости.

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{31}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df}\PY{o}{.}\PY{n}{stack}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{31}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
Coffee              5471
Bread               3325
Tea                 1435
Cake                1025
Pastry               856
                    {\ldots}
Olum \& polenta         1
Gift voucher           1
Coffee granules        1
Raw bars               1
Chicken sand           1
Length: 102, dtype: int64
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{32}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{df}\PY{o}{.}\PY{n}{stack}\PY{p}{(}\PY{p}{)}\PY{o}{.}\PY{n}{value\PYZus{}counts}\PY{p}{(}\PY{n}{normalize}\PY{o}{=}\PY{k+kc}{True}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{32}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
Coffee              0.266787
Bread               0.162140
Tea                 0.069976
Cake                0.049983
Pastry              0.041742
                      {\ldots}
Olum \& polenta      0.000049
Gift voucher        0.000049
Coffee granules     0.000049
Raw bars            0.000049
Chicken sand        0.000049
Length: 102, dtype: float64
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{33}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{item\PYZus{}counts} \PY{o}{=} \PY{n}{Counter}\PY{p}{(}\PY{n}{item} \PY{k}{for} \PY{n}{transaction} \PY{o+ow}{in} \PY{n}{transactions} \PY{k}{for} \PY{n}{item} \PY{o+ow}{in} \PY{n}{transaction}\PY{p}{)}
\PY{n}{most\PYZus{}common\PYZus{}items} \PY{o}{=} \PY{n}{item\PYZus{}counts}\PY{o}{.}\PY{n}{most\PYZus{}common}\PY{p}{(}\PY{l+m+mi}{20}\PY{p}{)}
\PY{n}{items}\PY{p}{,} \PY{n}{counts} \PY{o}{=} \PY{n+nb}{zip}\PY{p}{(}\PY{o}{*}\PY{n}{most\PYZus{}common\PYZus{}items}\PY{p}{)}
\PY{n}{fig}\PY{p}{,} \PY{n}{axs} \PY{o}{=} \PY{n}{plt}\PY{o}{.}\PY{n}{subplots}\PY{p}{(}\PY{l+m+mi}{1}\PY{p}{,} \PY{l+m+mi}{2}\PY{p}{,} \PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{13}\PY{p}{,} \PY{l+m+mi}{7}\PY{p}{)}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{items}\PY{p}{,} \PY{n}{counts}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{skyblue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Фактическая частота товаров}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Товары}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Частота}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{relative\PYZus{}counts} \PY{o}{=} \PY{p}{[}\PY{n}{count} \PY{o}{/} \PY{n+nb}{sum}\PY{p}{(}\PY{n}{item\PYZus{}counts}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{)} \PY{k}{for} \PY{n}{count} \PY{o+ow}{in} \PY{n}{counts}\PY{p}{]}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{items}\PY{p}{,} \PY{n}{relative\PYZus{}counts}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{lightgreen}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Относительная частота товаров}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}xlabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Товары}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{set\PYZus{}ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Относительная частота}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{axs}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{o}{.}\PY{n}{tick\PYZus{}params}\PY{p}{(}\PY{n}{axis}\PY{o}{=}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{x}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{n}{rotation}\PY{o}{=}\PY{l+m+mi}{90}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{tight\PYZus{}layout}\PY{p}{(}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_47_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \hypertarget{apyori-python}{%
\subsection{Apyori Python}\label{apyori-python}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{34}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{t1}\PY{p}{,} \PY{n}{rules\PYZus{}apriori\PYZus{}python} \PY{o}{=} \PY{n}{py\PYZus{}apriori}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{minSup}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{minConf}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{)}
\PY{n}{apriori\PYZus{}python\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{35}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{rules\PYZus{}apriori\PYZus{}python}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{35}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
[[\{'Pastry'\}, \{'Bread'\}, 0.33865030674846625],
 [\{'Tea'\}, \{'Coffee'\}, 0.3496296296296296],
 [\{'Hot chocolate'\}, \{'Coffee'\}, 0.5072463768115942],
 [\{'Cookies'\}, \{'Coffee'\}, 0.5184466019417475],
 [\{'Cake'\}, \{'Coffee'\}, 0.5269582909460834],
 [\{'Sandwich'\}, \{'Coffee'\}, 0.5323529411764706],
 [\{'Juice'\}, \{'Coffee'\}, 0.5342465753424658],
 [\{'Pastry'\}, \{'Coffee'\}, 0.5521472392638037],
 [\{'Medialuna'\}, \{'Coffee'\}, 0.5692307692307692],
 [\{'Toast'\}, \{'Coffee'\}, 0.7044025157232704]]
\end{Verbatim}
\end{tcolorbox}
        
    \hypertarget{apyori}{%
\subsection{Apyori}\label{apyori}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{36}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{rules\PYZus{}apriori} \PY{o}{=} \PY{n+nb}{list}\PY{p}{(}\PY{n}{apriori}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{min\PYZus{}support}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{min\PYZus{}confidence}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{,} \PY{n}{min\PYZus{}lift}\PY{o}{=}\PY{l+m+mf}{1.0001}\PY{p}{)}\PY{p}{)}
\PY{n}{apriori\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{37}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{rules\PYZus{}apriori}
\end{Verbatim}
\end{tcolorbox}

            \begin{tcolorbox}[breakable, size=fbox, boxrule=.5pt, pad at break*=1mm, opacityfill=0]
\prompt{Out}{outcolor}{37}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
[RelationRecord(items=frozenset(\{'Pastry', 'Bread'\}),
support=0.02895813660686182,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Pastry'\}),
items\_add=frozenset(\{'Bread'\}), confidence=0.3386503067484663,
lift=1.0421944054309438)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Cake'\}),
support=0.054348966530269646,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Cake'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5269582909460834,
lift=1.1091959962471556)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Cookies'\}),
support=0.028013849543594586,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Cookies'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5184466019417476,
lift=1.0912797180006175)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Hot chocolate'\}),
support=0.029377819746091702,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Hot chocolate'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5072463768115942,
lift=1.067704332462744)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Juice'\}),
support=0.02045955303745672,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Juice'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5342465753424658,
lift=1.124537126676025)]),
 RelationRecord(items=frozenset(\{'Medialuna', 'Coffee'\}),
support=0.03493862134088763,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Medialuna'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5692307692307691,
lift=1.1981754552867623)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Pastry'\}),
support=0.047214353163361665,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Pastry'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5521472392638037,
lift=1.1622162847666326)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Sandwich'\}),
support=0.03798132410030427,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Sandwich'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.5323529411764706,
lift=1.1205512107669922)]),
 RelationRecord(items=frozenset(\{'Coffee', 'Toast'\}),
support=0.023502255796873362,
ordered\_statistics=[OrderedStatistic(items\_base=frozenset(\{'Toast'\}),
items\_add=frozenset(\{'Coffee'\}), confidence=0.7044025157232704,
lift=1.4826988465897726)])]
\end{Verbatim}
\end{tcolorbox}
        
    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{38}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{result} \PY{o+ow}{in} \PY{n}{rules\PYZus{}apriori}\PY{p}{:}
    \PY{k}{for} \PY{n}{subset} \PY{o+ow}{in} \PY{n}{result}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{:}
        \PY{n+nb}{print}\PY{p}{(}\PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{0}\PY{p}{]}\PY{p}{,} \PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Support: }\PY{l+s+si}{\PYZob{}0\PYZcb{}}\PY{l+s+s2}{; Confidence: }\PY{l+s+si}{\PYZob{}1\PYZcb{}}\PY{l+s+s2}{; Lift: }\PY{l+s+si}{\PYZob{}2\PYZcb{}}\PY{l+s+s2}{;}\PY{l+s+s2}{\PYZdq{}}\PY{o}{.}\PY{n}{format}\PY{p}{(}\PY{n}{result}\PY{p}{[}\PY{l+m+mi}{1}\PY{p}{]}\PY{p}{,}\PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{2}\PY{p}{]}\PY{p}{,} \PY{n}{subset}\PY{p}{[}\PY{l+m+mi}{3}\PY{p}{]}\PY{p}{)}\PY{p}{)}
        \PY{n+nb}{print}\PY{p}{(}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
frozenset(\{'Pastry'\}) frozenset(\{'Bread'\})
Support: 0.02895813660686182; Confidence: 0.3386503067484663; Lift:
1.0421944054309438;
frozenset(\{'Cake'\}) frozenset(\{'Coffee'\})
Support: 0.054348966530269646; Confidence: 0.5269582909460834; Lift:
1.1091959962471556;
frozenset(\{'Cookies'\}) frozenset(\{'Coffee'\})
Support: 0.028013849543594586; Confidence: 0.5184466019417476; Lift:
1.0912797180006175;
frozenset(\{'Hot chocolate'\}) frozenset(\{'Coffee'\})
Support: 0.029377819746091702; Confidence: 0.5072463768115942; Lift:
1.067704332462744;
frozenset(\{'Juice'\}) frozenset(\{'Coffee'\})
Support: 0.02045955303745672; Confidence: 0.5342465753424658; Lift:
1.124537126676025;
frozenset(\{'Medialuna'\}) frozenset(\{'Coffee'\})
Support: 0.03493862134088763; Confidence: 0.5692307692307691; Lift:
1.1981754552867623;
frozenset(\{'Pastry'\}) frozenset(\{'Coffee'\})
Support: 0.047214353163361665; Confidence: 0.5521472392638037; Lift:
1.1622162847666326;
frozenset(\{'Sandwich'\}) frozenset(\{'Coffee'\})
Support: 0.03798132410030427; Confidence: 0.5323529411764706; Lift:
1.1205512107669922;
frozenset(\{'Toast'\}) frozenset(\{'Coffee'\})
Support: 0.023502255796873362; Confidence: 0.7044025157232704; Lift:
1.4826988465897726;
    \end{Verbatim}

    \hypertarget{efficient-apriori}{%
\subsection{Efficient Apriori}\label{efficient-apriori}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{39}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{itemsets}\PY{p}{,} \PY{n}{rules\PYZus{}efficient} \PY{o}{=} \PY{n}{eff\PYZus{}apriori}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{min\PYZus{}support}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{min\PYZus{}confidence}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{)}
\PY{n}{efficient\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{40}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{rules\PYZus{}efficient}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{rules\PYZus{}efficient}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
\{Pastry\} -> \{Bread\} (conf: 0.339, supp: 0.029, lift: 1.042, conv: 1.021)
\{Cake\} -> \{Coffee\} (conf: 0.527, supp: 0.054, lift: 1.109, conv: 1.110)
\{Cookies\} -> \{Coffee\} (conf: 0.518, supp: 0.028, lift: 1.091, conv: 1.090)
\{Hot chocolate\} -> \{Coffee\} (conf: 0.507, supp: 0.029, lift: 1.068, conv: 1.065)
\{Juice\} -> \{Coffee\} (conf: 0.534, supp: 0.020, lift: 1.125, conv: 1.127)
\{Medialuna\} -> \{Coffee\} (conf: 0.569, supp: 0.035, lift: 1.198, conv: 1.219)
\{Pastry\} -> \{Coffee\} (conf: 0.552, supp: 0.047, lift: 1.162, conv: 1.172)
\{Sandwich\} -> \{Coffee\} (conf: 0.532, supp: 0.038, lift: 1.121, conv: 1.122)
\{Tea\} -> \{Coffee\} (conf: 0.350, supp: 0.050, lift: 0.736, conv: 0.807)
\{Toast\} -> \{Coffee\} (conf: 0.704, supp: 0.024, lift: 1.483, conv: 1.776)
    \end{Verbatim}

    \hypertarget{fp-growth}{%
\subsection{FP-Growth}\label{fp-growth}}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{41}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{start\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)}
\PY{n}{itemsets}\PY{p}{,} \PY{n}{rules\PYZus{}fpgrowth} \PY{o}{=} \PY{n}{fpgrowth}\PY{p}{(}\PY{n}{transactions}\PY{p}{,} \PY{n}{minSupRatio}\PY{o}{=}\PY{n}{min\PYZus{}support}\PY{p}{,} \PY{n}{minConf}\PY{o}{=}\PY{n}{min\PYZus{}confidence}\PY{p}{)}
\PY{n}{fp\PYZus{}time} \PY{o}{=} \PY{n}{time}\PY{o}{.}\PY{n}{perf\PYZus{}counter}\PY{p}{(}\PY{p}{)} \PY{o}{\PYZhy{}} \PY{n}{start\PYZus{}time}
\end{Verbatim}
\end{tcolorbox}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{42}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{k}{for} \PY{n}{i} \PY{o+ow}{in} \PY{n+nb}{range}\PY{p}{(}\PY{n+nb}{len}\PY{p}{(}\PY{n}{rules\PYZus{}fpgrowth}\PY{p}{)}\PY{p}{)}\PY{p}{:}
    \PY{n+nb}{print}\PY{p}{(}\PY{n}{rules\PYZus{}fpgrowth}\PY{p}{[}\PY{n}{i}\PY{p}{]}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{Verbatim}[commandchars=\\\{\}]
[\{'Toast'\}, \{'Coffee'\}, 0.7044025157232704]
[\{'Scone'\}, \{'Coffee'\}, 0.5229357798165137]
[\{'Soup'\}, \{'Coffee'\}, 0.4601226993865031]
[\{'Juice'\}, \{'Coffee'\}, 0.5342465753424658]
[\{'Alfajores'\}, \{'Coffee'\}, 0.5406976744186046]
[\{'Muffin'\}, \{'Coffee'\}, 0.489010989010989]
[\{'Brownie'\}, \{'Coffee'\}, 0.49076517150395776]
[\{'Cookies'\}, \{'Coffee'\}, 0.5184466019417475]
[\{'Hot chocolate'\}, \{'Coffee'\}, 0.5072463768115942]
[\{'Medialuna'\}, \{'Coffee'\}, 0.5692307692307692]
[\{'Sandwich'\}, \{'Coffee'\}, 0.5323529411764706]
[\{'Pastry'\}, \{'Bread'\}, 0.33865030674846625]
[\{'Pastry'\}, \{'Coffee'\}, 0.5521472392638037]
[\{'Cake'\}, \{'Coffee'\}, 0.5269582909460834]
[\{'Cake'\}, \{'Coffee'\}, 0.5269582909460834]
[\{'Tea'\}, \{'Coffee'\}, 0.3496296296296296]
    \end{Verbatim}

    \begin{tcolorbox}[breakable, size=fbox, boxrule=1pt, pad at break*=1mm,colback=cellbackground, colframe=cellborder]
\prompt{In}{incolor}{43}{\boxspacing}
\begin{Verbatim}[commandchars=\\\{\}]
\PY{n}{times} \PY{o}{=} \PY{p}{\PYZob{}}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Apyori}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{apriori\PYZus{}time}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Efficient Apriori}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{efficient\PYZus{}time}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Apriori Python}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{apriori\PYZus{}python\PYZus{}time}\PY{p}{,}
    \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{FP\PYZhy{}Growth}\PY{l+s+s1}{\PYZsq{}}\PY{p}{:} \PY{n}{fp\PYZus{}time}\PY{p}{,}
\PY{p}{\PYZcb{}}
\PY{c+c1}{\PYZsh{} Построение гистограммы}
\PY{n}{plt}\PY{o}{.}\PY{n}{figure}\PY{p}{(}\PY{n}{figsize}\PY{o}{=}\PY{p}{(}\PY{l+m+mi}{8}\PY{p}{,} \PY{l+m+mi}{5}\PY{p}{)}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{bar}\PY{p}{(}\PY{n}{times}\PY{o}{.}\PY{n}{keys}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{times}\PY{o}{.}\PY{n}{values}\PY{p}{(}\PY{p}{)}\PY{p}{,} \PY{n}{color}\PY{o}{=}\PY{p}{[}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{skyblue}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{orange}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{green}\PY{l+s+s1}{\PYZsq{}}\PY{p}{,} \PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{red}\PY{l+s+s1}{\PYZsq{}}\PY{p}{]}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{title}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Сравнение времени выполнения алгоритмов}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{ylabel}\PY{p}{(}\PY{l+s+s1}{\PYZsq{}}\PY{l+s+s1}{Время (сек)}\PY{l+s+s1}{\PYZsq{}}\PY{p}{)}
\PY{n}{plt}\PY{o}{.}\PY{n}{show}\PY{p}{(}\PY{p}{)}
\PY{n+nb}{print}\PY{p}{(}\PY{l+s+s2}{\PYZdq{}}\PY{l+s+s2}{Время выполнения алгоритмов:}\PY{l+s+s2}{\PYZdq{}}\PY{p}{,} \PY{n}{times}\PY{p}{)}
\end{Verbatim}
\end{tcolorbox}

    \begin{center}
    \adjustimage{max size={0.9\linewidth}{0.9\paperheight}}{output_61_0.png}
    \end{center}
    { \hspace*{\fill} \\}
    
    \begin{Verbatim}[commandchars=\\\{\}]
Время выполнения алгоритмов: \{'Apyori': 0.0068414300003496464, 'Efficient
Apriori': 0.005519979000382591, 'Apriori Python': 0.2826084219996119, 'FP-
Growth': 0.14789574699898367\}
    \end{Verbatim}

\clearpage

    \hypertarget{ux432ux44bux432ux43eux434}{%
\section*{\Large Вывод}\label{ux432ux44bux432ux43eux434}}

Время выполнения алгоритмов
для набора данных Market\_Basket\_Optimisation.csv:

\begin{itemize}
\tightlist
\item
  \textbf{Apyori}: 0.0186 сек.
\item
  \textbf{Efficient Apriori}: 0.0111 сек.
\item
  \textbf{Apriori Python}: 0.6744 сек.
\item
  \textbf{FP-Growth}: 0.1386 сек.
\end{itemize}

Время выполнения алгоритмов для набора данных data.csv:

\begin{itemize}
\tightlist
\item
  \textbf{Apyori}: 0.0068 сек.
\item
  \textbf{Efficient Apriori}: 0.0055 сек.
\item
  \textbf{Apriori Python}: 0.2826 сек.
\item
  \textbf{FP-Growth}: 0.1479 сек.
\end{itemize}

По полученным данным можно сделать вывод:

\begin{enumerate}
\item
  \textbf{Apyori}: Apyori --- это одна из самых простых и легких для
  реализации версий алгоритма Apriori. Этот алгоритм работает достаточно
  быстро на малых и средних данных, так как не требует большого объема
  памяти и имеет базовую оптимизацию. Время работы крайне малое, что
  делает его предпочтительным для небольших наборов данных или для
  быстрой генерации правил.
\item
  \textbf{Efficient Apriori}: Efficient Apriori --- оптимизированная
  версия алгоритма Apriori. Это решение гораздо быстрее по времени, чем
  другие реализации Apriori, потому что использует улучшенные структуры
  данных и методы для минимизации количества проверок. Время работы чуть
  меньше, чем у Apyori, что может свидетельствовать о большем уровне
  оптимизации в этом алгоритме.
\item
  \textbf{Apriori Python}: Этот алгоритм занимает значительно больше
  времени по сравнению с остальными (примерно в 40 раз дольше, чем
  Efficient Apriori). Причины могут быть связаны с особенностями
  реализации: возможно, он использует более сложные структуры данных или
  работает с полным поиском всех возможных комбинаций, что может
  приводить к большому времени на обработку данных. В некоторых случаях
  эта версия может не быть оптимальной для больших наборов данных.
\item
  \textbf{FP-Growth}: Алгоритм FP-Growth обычно значительно быстрее, чем
  Apriori, так как работает по другому принципу. Он строит ``часто
  встречающийся дерево'' (FP-дерево), что помогает быстро находить
  частые элементы без необходимости генерировать все возможные
  комбинации. Однако, несмотря на то, что он быстрее, чем Apriori
  Python, он все же несколько медленнее, чем Apyori и Efficient Apriori.
  Это может быть связано с особенностями этого алгоритма в контексте
  данного набора данных.
\end{enumerate}

\textbf{Итог}:

\begin{itemize}
\tightlist
\item
  \textbf{Лучший по времени алгоритм}: \textbf{Efficient Apriori} --- он
  оказался самым быстрым и эффективно обрабатывает данные.
\item
  \textbf{Самый медленный алгоритм}: \textbf{Apriori Python}, который по
  времени работы значительно отстает от других.
\end{itemize}

\end{document}

